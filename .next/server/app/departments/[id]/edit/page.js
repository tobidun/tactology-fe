(()=>{var e={};e.id=120,e.ids=[120],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>u});var a=r(3137),s=r(4647),n=r(4183),i=r.n(n),o=r(1775),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=a.AppPageRouteModule,u=["",{children:["departments",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5861)),"/Users/hellosauri/Projects/tactology-fe/app/departments/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6386)),"/Users/hellosauri/Projects/tactology-fe/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,1918,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/hellosauri/Projects/tactology-fe/app/departments/[id]/edit/page.tsx"],p="/departments/[id]/edit/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new d({definition:{kind:s.x.APP_PAGE,page:"/departments/[id]/edit/page",pathname:"/departments/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},7223:(e,t,r)=>{Promise.resolve().then(r.bind(r,7158))},7158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(80),s=r(9885),n=r(7114),i=r(8384),o=r(9424),l=r(3478),d=r(6206),u=r(5325),c=r(2653),p=r(7271);function m({params:e}){let{id:t}=e,[r,m]=(0,s.useState)(""),[x,h]=(0,s.useState)([{name:""}]),[g,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),y=(0,n.useRouter)(),{data:j,loading:w,error:P}=(0,u.useQuery)(p.mG,{variables:{id:t}});console.log(t);let[_]=(0,u.useMutation)(p.aZ),[D]=(0,u.useMutation)(p.k_);(0,s.useEffect)(()=>{j&&j.department&&(m(j.department.name),h(j.department.subDepartments))},[j]);let N=(e,t)=>{let r=[...x];r[e].name=t,h(r)},q=e=>{let t=x.filter((t,r)=>r!==e);h(t)},E=async e=>{e.preventDefault(),f(!0);let a=localStorage.getItem("user-token");if(!a){console.error("User is not authenticated"),f(!1);return}try{await _({variables:{id:t,input:{name:r,subDepartments:x}},context:{headers:{Authorization:`Bearer ${a}`}}}),y.push("/departments")}catch(e){console.error("Error updating department:",e)}finally{f(!1)}},k=async()=>{if(window.confirm("Are you sure you want to delete this department?")){v(!0);try{await D({variables:{id:t}}),y.push("/departments")}catch(e){console.error("Error deleting department:",e)}finally{v(!1)}}};return w?a.jsx("div",{children:"Loading..."}):P?(0,a.jsxs)("div",{children:["Error loading department: ",P.message]}):a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,a.jsxs)("form",{onSubmit:E,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(l._,{htmlFor:"name",children:"Department Name"}),a.jsx(o.I,{id:"name",value:r,onChange:e=>m(e.target.value),required:!0})]}),x.map((e,t)=>a.jsx(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)(l._,{htmlFor:`subDepartment${t}`,children:["SubDepartment ",t+1]}),a.jsx(o.I,{id:`subDepartment${t}`,value:e.name,onChange:e=>N(t,e.target.value),required:!0})]}),a.jsx(i.z,{type:"button",onClick:()=>q(t),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600",children:a.jsx(d.Z,{className:"h-5 w-5"})})]})},t)),a.jsx(i.z,{type:"button",onClick:()=>{h([...x,{name:""}])},className:"mt-4 w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add SubDepartment"}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[a.jsx(i.z,{type:"button",variant:"outline",onClick:()=>y.push("/departments"),children:"Cancel"}),a.jsx(i.z,{type:"submit",disabled:g,children:g?a.jsx("div",{className:"animate-spin h-5 w-5 border-4 border-t-4 border-white rounded-full"}):"Update Department"})]})]}),a.jsx(i.z,{type:"button",onClick:k,className:"mt-4 w-full py-2 bg-red-600 text-white rounded-md hover:bg-red-700",disabled:b,children:b?"Deleting...":"Delete Department"})]})})})}},5861:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=r(7536);let s=(0,a.createProxy)(String.raw`/Users/hellosauri/Projects/tactology-fe/app/departments/[id]/edit/page.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default,l=o},7114:(e,t,r)=>{e.exports=r(2778)},3618:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var a=r(9885),s=r(3979),n=r(80),i=a.forwardRef((e,t)=>(0,n.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{let r=t.target;r.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[415,653,97,384,65,271],()=>r(1481));module.exports=a})();