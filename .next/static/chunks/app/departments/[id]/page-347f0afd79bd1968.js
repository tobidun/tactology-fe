(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var i=a(2898);let n=(0,i.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7458:function(e,t,a){Promise.resolve().then(a.bind(a,163))},163:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var i=a(7437),n=a(4033),r=a(3994),s=a(1350),l=a(6110),o=a(852),c=a(3023),d=a(4251),u=a(1393),m=a(2898);let p=(0,m.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var h=a(8253);let x=(0,m.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),y=(0,m.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var f=a(2265),b=a(2549);function w(e){let{children:t,isOpen:a,onClose:n,className:r}=e;return(0,f.useEffect)(()=>(a?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[a]),(0,f.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&n()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n]),(0,i.jsx)(u.M,{children:a&&(0,i.jsx)(d.E.div,{className:"fixed left-0 top-0 z-50 flex h-full w-full items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.target===e.currentTarget&&n()},children:(0,i.jsxs)(d.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"relative overflow-y-auto rounded bg-white p-2 ".concat(r),children:[t,(0,i.jsx)("button",{className:"absolute right-0 top-0 bg-transparent p-2 font-[900] text-black z-[20]",onClick:n,children:(0,i.jsx)(b.Z,{size:24})})]})})})}var j=a(1908),v=a(9583),g=a(5367),N=a(9883),k=a(2851),E=a(7221);function M(e){let{initialData:t,id:a,onClose:n}=e,[r,o]=(0,f.useState)(t.name||""),[m,p]=(0,f.useState)(t.subDepartments||[{name:""}]),[x,{loading:y}]=(0,E.D)(s.aZ,{refetchQueries:[{query:s.mG}]}),b=(e,t)=>{let a=m.map((a,i)=>i===e?{...a,name:t}:a);p(a)},w=e=>{let t=m.filter((t,a)=>a!==e);p(t)},M=async e=>{e.preventDefault(),console.log("it is working o");let t=localStorage.getItem("authToken");if(!t){console.error("User is not authenticated");return}try{let e=m.map(e=>({id:e.id,name:e.name}));await x({variables:{input:{id:a,name:r,subDepartments:e}},context:{headers:{Authorization:"Bearer ".concat(t)}}}),n()}catch(e){console.error("Error editiing department:",e)}};return(0,i.jsxs)("div",{className:"flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 overflow-hidden relative",children:[(0,i.jsx)(d.E.div,{className:"absolute inset-0 z-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:2},children:[...Array(20)].map((e,t)=>(0,i.jsx)(d.E.div,{className:"absolute rounded-full bg-white opacity-10",style:{width:100*Math.random()+50,height:100*Math.random()+50,top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%")},animate:{y:[0,100*Math.random()-50],x:[0,100*Math.random()-50]},transition:{duration:10*Math.random()+10,repeat:1/0,repeatType:"reverse"}},t))}),(0,i.jsx)("div",{className:"w-full relative z-10",children:(0,i.jsx)(d.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:(0,i.jsxs)(l.Zb,{className:"bg-white/10 backdrop-blur-md overflow-hidden border-none",children:[(0,i.jsxs)(d.E.div,{className:"flex items-center space-x-4 p-6 bg-gradient-to-r from-purple-500 to-pink-500",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[(0,i.jsx)(h.Z,{className:"h-10 w-10 text-yellow-300"}),(0,i.jsx)("div",{children:(0,i.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Edit Department"})})]}),(0,i.jsxs)("form",{onSubmit:M,children:[(0,i.jsxs)(l.aY,{className:"space-y-6 p-6",children:[(0,i.jsxs)(d.E.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,i.jsx)(v._,{htmlFor:"name",className:"text-lg font-semibold text-white",children:"Department Name"}),(0,i.jsx)(j.I,{id:"name",placeholder:"e.g., IT Department",value:r,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-white/20 border-2 border-white/30 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300",required:!0})]}),(0,i.jsx)(u.M,{children:null==m?void 0:m.map((e,t)=>(0,i.jsx)(d.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-4",children:(0,i.jsx)("div",{className:"flex items-center space-x-4",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)(v._,{htmlFor:"subDepartment".concat(t),className:"text-lg font-semibold text-white",children:["SubDepartment ",t+1]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(j.I,{id:"subDepartment".concat(t),placeholder:"e.g., SubDepartment ".concat(t+1),value:e.name,onChange:e=>b(t,e.target.value),className:"w-full px-4 py-3 bg-white/20 border-2 border-white/30 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300",required:!0}),(0,i.jsx)(c.z,{type:"button",onClick:()=>w(t),className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-400",children:(0,i.jsx)(g.Z,{className:"h-5 w-5"})})]})]})})},t))}),(0,i.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:(0,i.jsxs)(c.z,{type:"button",onClick:()=>{p([...m,{name:""}])},className:"w-full py-3 bg-yellow-400 text-purple-900 rounded-xl hover:bg-yellow-300 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 flex items-center justify-center space-x-2",children:[(0,i.jsx)(N.Z,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Add SubDepartment"})]})})]}),(0,i.jsxs)(l.eW,{className:"flex justify-end space-x-4 p-6 bg-gradient-to-r from-purple-500 to-pink-500",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",className:"px-6 py-3 text-black border-2 border-white/50 rounded-xl hover:bg-white/20 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white",children:"Cancel"}),(0,i.jsx)(c.z,{type:"submit",className:"px-6 py-3 bg-yellow-400 text-purple-900 rounded-xl hover:bg-yellow-300 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 flex items-center space-x-2",disabled:y,children:y?(0,i.jsx)("div",{className:"animate-spin h-5 w-5 border-4 border-t-4 border-purple-900 rounded-full"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"Save Changes"}),(0,i.jsx)(k.Z,{className:"h-5 w-5"})]})})]})]})]})})})]})}function D(e){let{id:t}=e,a=(0,n.useRouter)(),[m,b]=(0,f.useState)(!1),{data:j,loading:v,error:g}=(0,r.aM)(s.mG,{variables:{id:Number(t)}}),N=null==j?void 0:j.department;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 text-white p-8 overflow-hidden relative",children:[(0,i.jsx)(d.E.div,{className:"absolute inset-0 z-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:2},children:[...Array(20)].map((e,t)=>(0,i.jsx)(d.E.div,{className:"absolute rounded-full bg-white opacity-10",style:{width:100*Math.random()+50,height:100*Math.random()+50,top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%")},animate:{y:[0,100*Math.random()-50],x:[0,100*Math.random()-50]},transition:{duration:10*Math.random()+10,repeat:1/0,repeatType:"reverse"}},t))}),(0,i.jsx)("div",{className:"max-w-4xl mx-auto space-y-6 relative z-10",children:(0,i.jsx)(u.M,{mode:"wait",children:v?(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center h-64",children:(0,i.jsx)(o.g,{})},"loading"):g?(0,i.jsxs)(d.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.5},className:"bg-red-500/80 backdrop-blur-md rounded-3xl p-6 text-white flex items-center space-x-4",children:[(0,i.jsx)(p,{className:"w-8 h-8"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"Error"}),(0,i.jsx)("p",{children:"Unable to load department details. Please try again later."})]})]},"error"):(0,i.jsx)(d.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,i.jsxs)(l.Zb,{className:"rounded-3xl shadow-2xl h-[90dvh] bg-white/10 backdrop-blur-md border border-white/20 overflow-hidden",children:[(0,i.jsxs)(d.E.div,{className:"flex flex-col md:flex-row items-center justify-between p-6 bg-gradient-to-r from-purple-500 to-pink-500",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 mb-4 md:mb-0",children:[(0,i.jsx)(h.Z,{className:"h-10 w-10 text-yellow-300"}),(0,i.jsx)("h2",{className:"text-4xl font-bold text-white",children:null==N?void 0:N.name})]}),(0,i.jsxs)(c.z,{onClick:()=>b(!0),className:"bg-yellow-400 hover:bg-yellow-300 text-purple-900 font-semibold py-2 px-6 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center space-x-2",children:[(0,i.jsx)(x,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Edit Department"})]})]}),(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:(0,i.jsxs)(l.aY,{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"SubDepartments"}),(0,i.jsx)("ul",{className:"space-y-2",children:(0,i.jsx)(u.M,{children:(0,i.jsx)("div",{className:"grid grid-cols-3 gap-4",children:null==N?void 0:N.subDepartments.map((e,t)=>(0,i.jsxs)(d.E.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.1*t},className:"bg-white/20 rounded-lg p-8 text-white flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),(0,i.jsx)("span",{children:e.name})]},t))})})})]})}),(0,i.jsxs)(c.z,{onClick:()=>a.push("/departments"),className:"absolute bottom-4 right-4 bg-white/10 hover:bg-white/20 text-white font-semibold py-2 px-6 rounded-full transition-all duration-300 flex items-center space-x-2 border border-white/50",children:[(0,i.jsx)(y,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Back to Departments"})]})]})},"content")})})]}),(0,i.jsx)(w,{className:"!w-[500px] !p-0",isOpen:m,onClose:()=>b(!1),children:(0,i.jsx)(M,{id:Number(t),initialData:N,onClose:()=>b(!1)})})]})}},852:function(e,t,a){"use strict";a.d(t,{g:function(){return n}});var i=a(7437);function n(){return(0,i.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}}},function(e){e.O(0,[805,912,349,994,30,971,864,744],function(){return e(e.s=7458)}),_N_E=e.O()}]);