(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{2549:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2898);let a=(0,r.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8007:function(e,t,n){Promise.resolve().then(n.bind(n,2837))},2837:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437),a=n(2265),i=n(4033),o=n(3023),s=n(1908),u=n(9583),d=n(2549),l=n(3994),c=n(7221),f=n(4251),m=n(1350);function p(e){let{params:t}=e,{id:n}=t,[p,b]=(0,a.useState)(""),[h,v]=(0,a.useState)([{name:""}]),[x,g]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),j=(0,i.useRouter)(),{data:D,loading:N,error:k}=(0,l.aM)(m.mG,{variables:{id:n}});console.log(n);let[_]=(0,c.D)(m.aZ),[C]=(0,c.D)(m.k_);(0,a.useEffect)(()=>{D&&D.department&&(b(D.department.name),v(D.department.subDepartments))},[D]);let E=(e,t)=>{let n=[...h];n[e].name=t,v(n)},S=e=>{let t=h.filter((t,n)=>n!==e);v(t)},z=async e=>{e.preventDefault(),g(!0);let t=localStorage.getItem("user-token");if(!t){console.error("User is not authenticated"),g(!1);return}try{await _({variables:{id:n,input:{name:p,subDepartments:h}},context:{headers:{Authorization:"Bearer ".concat(t)}}}),j.push("/departments")}catch(e){console.error("Error updating department:",e)}finally{g(!1)}},$=async()=>{if(window.confirm("Are you sure you want to delete this department?")){w(!0);try{await C({variables:{id:n}}),j.push("/departments")}catch(e){console.error("Error deleting department:",e)}finally{w(!1)}}};return N?(0,r.jsx)("div",{children:"Loading..."}):k?(0,r.jsxs)("div",{children:["Error loading department: ",k.message]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)(f.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,r.jsxs)("form",{onSubmit:z,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(u._,{htmlFor:"name",children:"Department Name"}),(0,r.jsx)(s.I,{id:"name",value:p,onChange:e=>b(e.target.value),required:!0})]}),h.map((e,t)=>(0,r.jsx)(f.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)(u._,{htmlFor:"subDepartment".concat(t),children:["SubDepartment ",t+1]}),(0,r.jsx)(s.I,{id:"subDepartment".concat(t),value:e.name,onChange:e=>E(t,e.target.value),required:!0})]}),(0,r.jsx)(o.z,{type:"button",onClick:()=>S(t),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600",children:(0,r.jsx)(d.Z,{className:"h-5 w-5"})})]})},t)),(0,r.jsx)(o.z,{type:"button",onClick:()=>{v([...h,{name:""}])},className:"mt-4 w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add SubDepartment"}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,r.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>j.push("/departments"),children:"Cancel"}),(0,r.jsx)(o.z,{type:"submit",disabled:x,children:x?(0,r.jsx)("div",{className:"animate-spin h-5 w-5 border-4 border-t-4 border-white rounded-full"}):"Update Department"})]})]}),(0,r.jsx)(o.z,{type:"button",onClick:$,className:"mt-4 w-full py-2 bg-red-600 text-white rounded-md hover:bg-red-700",disabled:y,children:y?"Deleting...":"Delete Department"})]})})})}},3023:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var r=n(7437),a=n(2265),i=n(7256),o=n(6061),s=n(9311);let u=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:n,variant:a,size:o,asChild:d=!1,...l}=e,c=d?i.g7:"button";return(0,r.jsx)(c,{className:(0,s.cn)(u({variant:a,size:o,className:n})),ref:t,...l})});d.displayName="Button"},1908:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(7437),a=n(2265),i=n(9311);let o=a.forwardRef((e,t)=>{let{className:n,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md !outline-none border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:!outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});o.displayName="Input"},9583:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(7437),a=n(2265),i=n(9381),o=a.forwardRef((e,t)=>(0,r.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{let n=t.target;n.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var s=n(6061),u=n(9311);let d=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(o,{ref:t,className:(0,u.cn)(d(),n),...a})});l.displayName=o.displayName},1350:function(e,t,n){"use strict";n.d(t,{VR:function(){return f},aZ:function(){return m},hf:function(){return l},k_:function(){return p},mG:function(){return c}});var r=n(230),a=n(7389);function i(){let e=(0,r._)(["\n  query GetDepartments {\n    departments {\n      id\n      name\n      createdBy {\n        id\n        username\n      }\n      subDepartments {\n        id\n        name\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){let e=(0,r._)(["\n  query department($id: Float!) {\n    department(id: $id) {\n      name\n      subDepartments {\n        id\n        name\n      }\n    }\n  }\n"]);return o=function(){return e},e}function s(){let e=(0,r._)(["\n  mutation createDepartment($input: CreateDepartmentInput!) {\n    createDepartment(input: $input) {\n      id\n      name\n      subDepartments {\n        id\n        name\n      }\n    }\n  }\n"]);return s=function(){return e},e}function u(){let e=(0,r._)(["\n  mutation updateDepartment($input: UpdateDepartmentInput!) {\n    updateDepartment(input: $input) {\n      id\n      name\n      subDepartments {\n        name\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){let e=(0,r._)(["\n  mutation deleteDepartment($id: ID!) {\n    deleteDepartment(id: $id) {\n      id\n    }\n  }\n"]);return d=function(){return e},e}let l=(0,a.Ps)(i()),c=(0,a.Ps)(o()),f=(0,a.Ps)(s()),m=(0,a.Ps)(u()),p=(0,a.Ps)(d())},9311:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var r=n(7042),a=n(3986);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m)((0,r.W)(t))}},4033:function(e,t,n){e.exports=n(290)},9381:function(e,t,n){"use strict";n.d(t,{WV:function(){return s},jH:function(){return u}});var r=n(2265),a=n(4887),i=n(7256),o=n(7437),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=r.forwardRef((e,n)=>{let{asChild:r,...a}=e,s=r?i.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(s,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function u(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[805,912,349,994,971,864,744],function(){return e(e.s=8007)}),_N_E=e.O()}]);